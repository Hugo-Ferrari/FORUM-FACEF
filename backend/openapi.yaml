openapi: 3.1.0
info:
  title: FORUM FACEF API
  description: "\n    ## API do Fórum da FACEF\n    \n    Esta API fornece endpoints\
    \ para gerenciar:\n    * **Autenticação** - Login e registro de usuários\n   \
    \ * **Threads** - Tópicos do fórum organizados por curso\n    * **Posts** - Respostas\
    \ e comentários nas threads\n    * **Votos** - Sistema de upvote/downvote para\
    \ posts\n    * **Chat** - Mensagens em tempo real via WebSocket\n    \n    ###\
    \ WebSocket\n    Conecte-se ao chat em tempo real via: `ws://localhost:8000/api/ws`\n\
    \    \n    ### Autenticação\n    Muitas rotas requerem o header `user-id` para\
    \ identificação do usuário.\n    "
  contact:
    name: uniFACEF Dev Team
    url: https://www.unifacef.com.br
  version: 1.0.0
paths:
  /:
    get:
      tags:
      - Root
      summary: Get Root
      description: 'Endpoint raiz da API


        Retorna uma mensagem de boas-vindas confirmando que a API está funcionando.'
      operationId: get_root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /auth/:
    get:
      tags:
      - Auth
      summary: Get Auth
      operationId: get_auth_auth__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/chat/:
    get:
      tags:
      - Chat
      summary: List Chats
      description: Retorna lista de chats que o usuário participa
      operationId: list_chats_api_chat__get
      parameters:
      - name: user_id
        in: query
        required: true
        schema:
          type: string
          title: User Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/chat/{chat_id}/messages:
    get:
      tags:
      - Chat
      summary: Get Chat Messages
      description: Retorna mensagens do chat ordenadas por timestamp asc
      operationId: get_chat_messages_api_chat__chat_id__messages_get
      parameters:
      - name: chat_id
        in: path
        required: true
        schema:
          type: string
          title: Chat Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/posts/:
    post:
      tags:
      - Threads
      - Posts
      summary: Create New Post
      description: 'Cria um novo post em uma thread.


        - **thread_id**: ID da thread onde o post será criado

        - **content**: Conteúdo do post

        - **is_anonymous**: Se o post é anônimo ou não'
      operationId: create_new_post_api_threads_posts__post
      parameters:
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostCreateRequest'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/posts/{post_id}:
    get:
      tags:
      - Threads
      - Posts
      summary: Get Post
      description: 'Retorna um post específico pelo ID.


        - **post_id**: ID do post'
      operationId: get_post_api_threads_posts__post_id__get
      parameters:
      - name: post_id
        in: path
        required: true
        schema:
          type: string
          title: Post Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - Threads
      - Posts
      summary: Update Post
      description: 'Atualiza um post existente.


        - **post_id**: ID do post a ser atualizado

        - **content**: Novo conteúdo do post

        - **is_anonymous**: Se o post é anônimo ou não'
      operationId: update_post_api_threads_posts__post_id__patch
      parameters:
      - name: post_id
        in: path
        required: true
        schema:
          type: string
          title: Post Id
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Threads
      - Posts
      summary: Delete Post
      description: 'Deleta um post existente.


        - **post_id**: ID do post a ser deletado'
      operationId: delete_post_api_threads_posts__post_id__delete
      parameters:
      - name: post_id
        in: path
        required: true
        schema:
          type: string
          title: Post Id
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/votes/:
    post:
      tags:
      - Threads
      - Post Votes
      summary: Vote On Post
      description: 'Cria ou atualiza um voto em um post.


        - **post_id**: ID do post a ser votado

        - **vote_type**: Tipo de voto ("upvote" ou "downvote")


        Se o usuário já votou, o voto será atualizado.'
      operationId: vote_on_post_api_threads_votes__post
      parameters:
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostsVotesCreateRequest'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/votes/post/{post_id}:
    get:
      tags:
      - Threads
      - Post Votes
      summary: Get Votes For Post
      description: 'Retorna todos os votos de um post específico.


        - **post_id**: ID do post'
      operationId: get_votes_for_post_api_threads_votes_post__post_id__get
      parameters:
      - name: post_id
        in: path
        required: true
        schema:
          type: string
          title: Post Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/votes/user/me:
    get:
      tags:
      - Threads
      - Post Votes
      summary: Get My Votes
      description: Retorna todos os votos do usuário autenticado.
      operationId: get_my_votes_api_threads_votes_user_me_get
      parameters:
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/votes/{post_id}:
    delete:
      tags:
      - Threads
      - Post Votes
      summary: Remove Vote
      description: 'Remove o voto do usuário em um post específico.


        - **post_id**: ID do post'
      operationId: remove_vote_api_threads_votes__post_id__delete
      parameters:
      - name: post_id
        in: path
        required: true
        schema:
          type: string
          title: Post Id
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/:
    post:
      tags:
      - Threads
      summary: Create New Thread
      description: 'Cria uma nova thread no fórum.


        - **title**: Título da thread

        - **content**: Conteúdo da thread

        - **is_anonymous**: Se a thread é anônima ou não'
      operationId: create_new_thread_api_threads__post
      parameters:
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ThreadsType'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/course/{course_id}:
    get:
      tags:
      - Threads
      summary: Get Course Threads
      description: 'Retorna todas as threads de um curso específico.


        - **course_id**: ID do curso'
      operationId: get_course_threads_api_threads_course__course_id__get
      parameters:
      - name: course_id
        in: path
        required: true
        schema:
          type: string
          title: Course Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/threads/{thread_id}:
    get:
      tags:
      - Threads
      summary: Get Thread
      description: 'Retorna uma thread específica pelo ID.


        - **thread_id**: ID da thread'
      operationId: get_thread_api_threads__thread_id__get
      parameters:
      - name: thread_id
        in: path
        required: true
        schema:
          type: string
          title: Thread Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - Threads
      summary: Update Thread
      description: 'Atualiza uma thread existente.


        - **thread_id**: ID da thread a ser atualizada

        - **data**: Dados a serem atualizados (title, content, etc.)'
      operationId: update_thread_api_threads__thread_id__patch
      parameters:
      - name: thread_id
        in: path
        required: true
        schema:
          type: string
          title: Thread Id
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - Threads
      summary: Delete Thread
      description: 'Deleta uma thread existente.


        - **thread_id**: ID da thread a ser deletada'
      operationId: delete_thread_api_threads__thread_id__delete
      parameters:
      - name: thread_id
        in: path
        required: true
        schema:
          type: string
          title: Thread Id
      - name: user-id
        in: header
        required: true
        schema:
          type: string
          title: User-Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/:
    get:
      tags:
      - Root
      summary: Root
      operationId: root_api__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
components:
  schemas:
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    PostCreateRequest:
      properties:
        thread_id:
          type: string
          title: Thread Id
        content:
          type: string
          title: Content
      type: object
      required:
      - thread_id
      - content
      title: PostCreateRequest
    PostUpdateRequest:
      properties:
        content:
          anyOf:
          - type: string
          - type: 'null'
          title: Content
      type: object
      title: PostUpdateRequest
    PostsVotesCreateRequest:
      properties:
        post_id:
          type: string
          title: Post Id
        vote_type:
          type: string
          enum:
          - upvote
          - downvote
          title: Vote Type
      type: object
      required:
      - post_id
      - vote_type
      title: PostsVotesCreateRequest
    ThreadsType:
      properties:
        id:
          anyOf:
          - type: string
          - type: 'null'
          title: Id
        title:
          type: string
          title: Title
        content:
          type: string
          title: Content
        created_by:
          anyOf:
          - type: string
          - type: 'null'
          title: Created By
        is_anonymous:
          type: boolean
          title: Is Anonymous
        course_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Course Id
        year:
          anyOf:
          - type: string
          - type: 'null'
          title: Year
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
        ai_suggested_answer:
          anyOf:
          - type: string
          - type: 'null'
          title: Ai Suggested Answer
      type: object
      required:
      - title
      - content
      - is_anonymous
      title: ThreadsType
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
tags:
- name: Root
  description: Endpoint raiz da API
- name: Auth
  description: Operações de autenticação e autorização de usuários
- name: Chat
  description: Operações relacionadas a chats e mensagens (REST). WebSocket disponível
    em `/api/ws`
- name: Threads
  description: Operações CRUD para threads do fórum
- name: Posts
  description: Operações CRUD para posts dentro de threads
- name: Post Votes
  description: Sistema de votação (upvote/downvote) para posts
